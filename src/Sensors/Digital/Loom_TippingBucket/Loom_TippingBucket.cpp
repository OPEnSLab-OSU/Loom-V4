#include "Loom_TippingBucket.h"

//////////////////////////////////////////////////////////////////////////////////////////////////////
Loom_TippingBucket::Loom_TippingBucket(Manager& man, int pin) : manInst(man), analogPort(pin) {
    // Set the interrupt to input pullup
    pinMode(pin, INPUT_PULLUP);
}
//////////////////////////////////////////////////////////////////////////////////////////////////////

//////////////////////////////////////////////////////////////////////////////////////////////////////
void Loom_TippingBucket::initialize(){
    last_micros = micros();

    // Attach interrupt to the tipping bucket pin
    attachInterrupt(digitalPinToInterrupt(pin), tippingISR, FALLING);
    attachInterrupt(digitalPinToInterrupt(pin), tippingISR, FALLING);
}
//////////////////////////////////////////////////////////////////////////////////////////////////////